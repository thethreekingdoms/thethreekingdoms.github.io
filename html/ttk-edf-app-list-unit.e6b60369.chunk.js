webpackJsonp([15],{904:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a,i=p(n(0)),r=p(n(10)),o=p(n(7)),u=p(n(9)),c=p(n(11)),d=p(n(12)),s=n(2),l=(p(s),n(34)),f=p(n(344));function p(t){return t&&t.__esModule?t:{"default":t}}var h=(0,l.wrapper)(f["default"])(a=function(t){function e(){return(0,o["default"])(this,e),(0,c["default"])(this,(e.__proto__||(0,r["default"])(e)).apply(this,arguments))}return(0,d["default"])(e,t),(0,u["default"])(e,[{key:"render",value:function(){return this.props.monkeyKing((0,i["default"])({},this.props,{path:"root"}))}}]),e}(s.Component))||a;e["default"]=h,t.exports=e["default"]},905:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i,r=f(n(0)),o=f(n(84)),u=f(n(85)),c=f(n(7));e["default"]=function(t){var e=new d.action(t),n=s["default"].actionCreator((0,r["default"])({},t,{metaAction:e})),a=new p((0,r["default"])({},t,{metaAction:e,extendAction:n})),i=(0,r["default"])({},e,n.gridAction,a);return e.config({metaHandlers:i}),i};f(n(2));var d=n(34),s=(n(48),f(n(945))),l=f(n(207));function f(t){return t&&t.__esModule?t:{"default":t}}var p=(a=function t(e){(0,c["default"])(this,t),i.call(this),this.metaAction=e.metaAction,this.extendAction=e.extendAction,this.config=l["default"].current,this.webapi=this.config.webapi},i=function(){var e,n,a,i,r=this;this.onInit=function(t){var e=t.component,n=t.injections;r.extendAction.gridAction.onInit({component:e,injections:n}),r.component=e,(r.injections=n).reduce("init"),r.load()},this.load=(e=(0,u["default"])(o["default"].mark(function t(e){var n;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e||(n=r.metaAction.gf("data.pagination").toJS(),e={currentPage:n.current,pageSize:n.pageSize}),r.metaAction.sf("data.other.loading",!0),r.getData(e).then(function(t){r.injections.reduce("load",t),r.metaAction.sf("data.other.loading",!1)});case 3:case"end":return t.stop()}},t,r)})),function(t){return e.apply(this,arguments)}),this.heightCount=function(){var t="";return!r.component.props.modelStatus||1!=r.component.props.modelStatus&&2!=r.component.props.modelStatus||(t="ttk-edf-app-list-unit-contentHeight"),t},this.getListRowsCount=function(){return r.metaAction.gf("data.list").size},this.delClick=function(e){return function(t){r.del([{id:e.id,ts:e.ts}])}},this.delClickBatch=function(){var t=r.extendAction.gridAction.getSelectedInfo("dataGrid");if(t.length){var e=[];t.forEach(function(t){e.push({id:t.id,ts:t.ts})}),r.del(e)}else r.metaAction.toast("warning","请选择计量单位！")},this.del=(n=(0,u["default"])(o["default"].mark(function t(e){var n;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.metaAction.modal("confirm",{title:"删除",content:"确认删除?"});case 2:if(!t.sent){t.next=9;break}return t.next=6,r.webapi.unit["delete"](e);case 6:(n=t.sent).length&&0<n.length?n.forEach(function(t){r.metaAction.toast("warn",t.message)}):r.metaAction.toast("success","删除成功！"),r.load();case 9:case"end":return t.stop()}},t,r)})),function(t){return n.apply(this,arguments)}),this.modifyDetail=function(n){return function(t){var e=n||null;r.add(e)}},this.addClick=function(){r.add()},this.add=function(t){var e={title:"",appName:"",id:t};e.title="计量单位",e.appName="ttk-edf-app-card-unit",r.addModel(e)},this.addModel=(a=(0,u["default"])(o["default"].mark(function t(e){return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.metaAction.modal("show",{title:e.title,className:"ttk-edf-app-list-unit-modal",wrapClassName:"card-archive",width:350,height:280,children:r.metaAction.loadApp(e.appName,{store:r.component.props.store,personId:e.id})});case 2:t.sent&&r.load();case 4:case"end":return t.stop()}},t,r)})),function(t){return a.apply(this,arguments)}),this.selectRow=function(e){return function(t){r.injections.reduce("selectRow",e,t.target.checked)}},this.pageChanged=function(t,e){null!=e&&null!=e||(e=r.metaAction.gf("data.pagination").toJS().pageSize);var n={currentPage:t,pageSize:e};r.load(n)},this.getData=(i=(0,u["default"])(o["default"].mark(function t(e){var n,a,i;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,a=r.metaAction.gf("data.pagination"),i={pageSize:a.toJS().pageSize},e&&e.currentPage&&(i.currentPage=e.currentPage,i.pageSize=e.pageSize),t.next=4,r.webapi.unit.query({page:i});case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,r)})),function(t){return i.apply(this,arguments)})},a);t.exports=e["default"]},906:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(0)),i=a(n(7));e["default"]=function(t){var e=new u.reducer(t),n=d["default"].reducerCreator((0,r["default"])({},t,{metaReducer:e})),a=new l((0,r["default"])({},t,{metaReducer:e,extendReducer:n})),i=(0,r["default"])({},e,n.gridReducer,a);return(0,r["default"])({},i)};var o=n(13),u=n(34),c=a(n(207)),d=a(n(945)),s=n(345);function a(t){return t&&t.__esModule?t:{"default":t}}var l=function t(e){var a=this;(0,i["default"])(this,t),this.init=function(t,e){var n=(0,s.getInitState)();return a.metaReducer.init(t,n)},this.selectAll=function(t,e,n){return t=a.extendReducer.gridReducer.selectAll(t,e,n)},this.load=function(t,e){if(e&&e.list&&(t=a.metaReducer.sf(t,"data.list",(0,o.fromJS)(e.list))),e&&e.page){var n={current:e.page.currentPage,total:e.page.totalCount,pageSize:e.page.pageSize};t=a.metaReducer.sf(t,"data.pagination",(0,o.fromJS)(n))}return t},this.selectRow=function(t,e,n){return t=a.metaReducer.sf(t,"data.list."+e+".selected",n)},this.metaReducer=e.metaReducer,this.extendReducer=e.extendReducer,this.config=c["default"].current};t.exports=e["default"]},945:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(0),r=(a=i)&&a.__esModule?a:{"default":a},o=n(48);e["default"]={actionCreator:function(t){return{gridAction:new o.GridDecorator.action((0,r["default"])({},t,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(t){return[]},cellIsReadonly:function(t,e,n){return!1}}}}))}},reducerCreator:function(t){return{gridReducer:new o.GridDecorator.reducer((0,r["default"])({},t,{gridOption:{dataGrid:{path:"data.list",selectFieldName:"selected",cellClassName:"app-archives-list-cell",emptyRow:{},getColNames:function(t){return[]},cellIsReadonly:function(t,e,n){return!1}}}}))}}},t.exports=e["default"]}});