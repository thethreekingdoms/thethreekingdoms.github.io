webpackJsonp([21],{506:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,c=f(a(0)),n=f(a(10)),r=f(a(7)),i=f(a(9)),u=f(a(11)),s=f(a(12)),l=a(1),p=(f(l),a(34)),d=f(a(189));function f(t){return t&&t.__esModule?t:{"default":t}}var m=(0,p.wrapper)(d["default"])(o=function(t){function e(){return(0,r["default"])(this,e),(0,u["default"])(this,(e.__proto__||(0,n["default"])(e)).apply(this,arguments))}return(0,s["default"])(e,t),(0,i["default"])(e,[{key:"render",value:function(){return this.props.monkeyKing((0,c["default"])({},this.props,{path:"root"}))}}]),e}(l.Component))||o;e["default"]=m,t.exports=e["default"]},507:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,c,n=m(a(0)),r=m(a(84)),i=m(a(85)),u=m(a(7));e["default"]=function(t){var e=new l.action(t),a=new h((0,n["default"])({},t,{metaAction:e})),o=(0,n["default"])({},e,a);return e.config({metaHandlers:o}),o};var s=m(a(1)),l=a(34),p=m(a(150)),d=a(13),f=a(48);function m(t){return t&&t.__esModule?t:{"default":t}}var h=(o=function t(e){(0,u["default"])(this,t),c.call(this),this.metaAction=e.metaAction,this.config=p["default"].current,this.webapi=this.config.webapi},c=function(){var a,e,n=this;this.onInit=function(t){var e=t.component,a=t.injections;n.component=e,(n.injections=a).reduce("init"),n.load()},this.componentDidMount=function(){},this.componentWillReceiveProps=function(t){(0,d.is)(t.periodList,n.component.props.periodList)&&(0,d.is)(t.data,n.component.props.data)||!t.data||n.initData(t.periodList,t.data)},this.load=function(){n.metaAction.sf("data.type","chart"),n.component.props.data&&n.initData(n.component.props.periodList,n.component.props.data)},this.initData=function(t,e){var a=t.map(function(t){return t.replace("年",".").replace("月","")});n.convertData(e);n.metaAction.sf("data.period",a[0]),n.injections.reduce("load",{periodList:a})},this.setField=(a=(0,i["default"])(r["default"].mark(function t(e,a){var o,c;return r["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.metaAction.sf("data.period",a),o={year:a.split(".")[0],period:a.split(".")[1]},t.next=4,n.webapi.receive.query(o);case 4:c=t.sent,n.convertData(c);case 6:case"end":return t.stop()}},t,n)})),function(t,e){return a.apply(this,arguments)}),this.refresh=(0,i["default"])(r["default"].mark(function t(){var e;return r["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.webapi.receive.query(n.metaAction.gf("data.period"));case 2:e=t.sent,n.convertData(e);case 4:case"end":return t.stop()}},t,n)})),this.convertData=function(t){for(var e in t)for(var a in t[e])t[e].code=a,t[e].value=t[e][a];var o=[],c={};c.accountToAccountsReceivableMap=t.accountToAccountsReceivableMap&&t.accountToAccountsReceivableMap.value,c.accountToOtherAccountsReceivableMap=t.accountToOtherAccountsReceivableMap&&t.accountToOtherAccountsReceivableMap.value,c.accountToAccountsPayableMap=t.accountToAccountsPayableMap&&t.accountToAccountsPayableMap.value,c.accountToOtherAccountsPayableMap=t.accountToOtherAccountsPayableMap&&t.accountToOtherAccountsPayableMap.value,o.push(c),n.injections.reduce("setData",{data:t,tableSource:o})},this.fieldChange=function(t,e){"0"==e?n.metaAction.sf("data.type","chart"):n.metaAction.sf("data.type","table")},this.handlePeriod=function(t){console.log(t)},this.fold=(e=(0,i["default"])(r["default"].mark(function t(e){return r["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1==n.metaAction.gf("data.fold")?n.metaAction.sf("data.fold",!1):n.metaAction.sf("data.fold",!0),t.t0=n.component.props.callback,!t.t0){t.next=5;break}return t.next=5,n.component.props.callback(e);case 5:case"end":return t.stop()}},t,n)})),function(t){return e.apply(this,arguments)}),this.chartClick=function(t){var e=n.metaAction.gf("data.list")&&n.metaAction.gf("data.list").toJS(),a=n.metaAction.gf("data.period");switch(t.dataIndex){case 3:n.component.props.setPortalContent&&n.component.props.setPortalContent("余额表","app-balancesum-rpt",{initSearchValue:{date_end:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),date_start:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),beginAccountCode:e.accountToAccountsReceivableMap.code,endAccountCode:e.accountToAccountsReceivableMap.code}});break;case 2:n.component.props.setPortalContent&&n.component.props.setPortalContent("余额表","app-balancesum-rpt",{initSearchValue:{date_end:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),date_start:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),beginAccountCode:e.accountToOtherAccountsReceivableMap.code,endAccountCode:e.accountToOtherAccountsReceivableMap.code}});break;case 1:n.component.props.setPortalContent&&n.component.props.setPortalContent("余额表","app-balancesum-rpt",{initSearchValue:{date_end:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),date_start:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),beginAccountCode:e.accountToAccountsPayableMap.code,endAccountCode:e.accountToAccountsPayableMap.code}});break;case 0:n.component.props.setPortalContent&&n.component.props.setPortalContent("余额表","app-balancesum-rpt",{initSearchValue:{date_end:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),date_start:n.metaAction.stringToMoment(a.replace(".","-"),"YYYY-MM"),beginAccountCode:e.accountToOtherAccountsPayableMap.code,endAccountCode:e.accountToOtherAccountsPayableMap.code}})}},this.getContent=function(){var t=n.metaAction.gf("data.list")&&n.metaAction.gf("data.list").toJS(),e=n.metaAction.gf("data.tableSource")&&n.metaAction.gf("data.tableSource").toJS(),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisTick:{show:!1},boundaryGap:[0,.01]},yAxis:{triggerEvent:!0,axisTick:{show:!1},data:["其他应付","应付","其他应收","应收"],maxInterval:3,interval:0,splitLine:{show:!1}},series:[{data:[{value:t.accountToOtherAccountsPayableMap&&t.accountToOtherAccountsPayableMap.value,itemStyle:{normal:{color:"#2BB696"}}},{value:t.accountToAccountsPayableMap&&t.accountToAccountsPayableMap.value,itemStyle:{normal:{color:"#339ED5"}}},{value:t.accountToOtherAccountsReceivableMap&&t.accountToOtherAccountsReceivableMap.value,itemStyle:{normal:{color:"#CD5D93"}}},{value:t.accountToAccountsReceivableMap&&t.accountToAccountsReceivableMap.value,itemStyle:{normal:{color:"#E48E58"}}}],type:"bar",barWidth:"15"}]},o=n.metaAction.gf("data.type"),c={click:n.chartClick,timelinechanged:n.chartClick};return"chart"!=o&&o?"table"==o?s["default"].createElement(f.Table,{columns:[{title:"应收",dataIndex:"accountToAccountsReceivableMap",key:"accountToAccountsReceivableMap"},{title:"其他应收",dataIndex:"accountToOtherAccountsReceivableMap",key:"accountToOtherAccountsReceivableMap"},{title:"应付",dataIndex:"accountToAccountsPayableMap",key:"accountToAccountsPayableMap"},{title:"其他应付",dataIndex:"accountToOtherAccountsPayableMap",key:"accountToOtherAccountsPayableMap"}],bordered:!0,dataSource:e,pagination:!1,className:"rctable"}):void 0:s["default"].createElement(f.Echarts,{option:a,className:"rcchart",onEvents:c})}},o);t.exports=e["default"]},508:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,c,n=p(a(0)),r=p(a(7));e["default"]=function(t){var e=new u.reducer(t),a=new d((0,n["default"])({},t,{metaReducer:e}));return(0,n["default"])({},e,a)};var i=a(13),u=a(34),s=p(a(150)),l=a(190);function p(t){return t&&t.__esModule?t:{"default":t}}var d=(o=function t(e){(0,r["default"])(this,t),c.call(this),this.metaReducer=e.metaReducer,this.config=s["default"].current},c=function(){var o=this;this.init=function(t,e){var a=(0,l.getInitState)();return e&&(a.data=e),o.metaReducer.init(t,a)},this.load=function(t,e){return t=o.metaReducer.sf(t,"data.periodList",(0,i.fromJS)(e.periodList))},this.setData=function(t,e){return t=o.metaReducer.sf(t,"data.list",(0,i.fromJS)(e.data)),t=o.metaReducer.sf(t,"data.tableSource",(0,i.fromJS)(e.tableSource))}},o);t.exports=e["default"]}});