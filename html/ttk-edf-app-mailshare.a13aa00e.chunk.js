webpackJsonp([19],{563:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a,n=l(r(0)),s=l(r(10)),o=l(r(7)),u=l(r(9)),c=l(r(11)),i=l(r(12)),d=r(1),f=(l(d),r(34)),p=l(r(215));function l(e){return e&&e.__esModule?e:{"default":e}}var h=(0,f.wrapper)(p["default"])(a=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,s["default"])(t)).apply(this,arguments))}return(0,i["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){return this.props.monkeyKing((0,n["default"])({},this.props,{path:"root"}))}}]),t}(d.Component))||a;t["default"]=h,e.exports=t["default"]},564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n,l=i(r(0)),h=i(r(19)),m=i(r(84)),u=i(r(85)),s=i(r(7));t["default"]=function(e){var t=new o.action(e),r=new d((0,l["default"])({},e,{metaAction:t})),a=(0,l["default"])({},t,r);return t.config({metaHandlers:a}),a};i(r(1));var o=r(34),c=i(r(161));r(48);function i(e){return e&&e.__esModule?e:{"default":e}}var d=(a=function e(t){(0,s["default"])(this,e),n.call(this),this.metaAction=t.metaAction,this.config=c["default"].current,this.webapi=this.config.webapi,this.config=c["default"].current},n=function(){var r,t,a,n,s,o,p=this;this.tableName="总账（2017.01-2017.12）.pdf",this.onInit=function(e){var t=e.component,r=e.injections;p.component=t,(p.injections=r).reduce("init"),p.component.props.setOkListener&&p.component.props.setOkListener(p.onOk),p.load()},this.load=(0,u["default"])(m["default"].mark(function e(){var t,r,a,n,s,o;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=void 0,t=-1<p.component.props.shareUrl.indexOf("glsumrpt")?"总账":-1<p.component.props.shareUrl.indexOf("gldetailrpt")?"明细账":-1<p.component.props.shareUrl.indexOf("balancesumrpt")?"余额表":-1<p.component.props.shareUrl.indexOf("glauxsumrpt")?"辅助总账":-1<p.component.props.shareUrl.indexOf("gldetailauxrpt")?"辅助明细账":-1<p.component.props.shareUrl.indexOf("balanceauxrpt")?"辅助余额表":-1<p.component.props.shareUrl.indexOf("balanceSheet")?"资产负债表":-1<p.component.props.shareUrl.indexOf("profitStatement")?"利润表":"现金流量表",{},r=p.component.props.period.split("-"),a=p.component.props.period,n=p.component.props.params,s=0;s<r.length;s++)r[s]==r[s+1]&&(a=r[s]);o={params:n,period:a},t="水果资金流量表",p.metaAction.sf("data.other.file",t+"("+a+").pdf"),p.metaAction.sf("data.form.textBody","您好！附件是"+a+t+"，请查阅！"),p.injections.reduce("load",o,t),p.metaAction.sf("data.loading",!1);case 10:case"end":return e.stop()}},e,p)})),this.fieldChange=(r=(0,u["default"])(m["default"].mark(function e(t,r){return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.check([{path:t,value:r}]);case 2:case"end":return e.stop()}},e,p)})),function(e,t){return r.apply(this,arguments)}),this.goFile=(0,u["default"])(m["default"].mark(function e(){return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.webapi.mail.print(p.component.props.printShareUrl,p.component.props.params.newParams?p.component.props.params.newParams:p.component.props.params);case 2:e.sent;case 3:case"end":return e.stop()}},e,p)})),this.check=(t=(0,u["default"])(m["default"].mark(function e(t){var r,a,n,s,o,u,c,i,d,f;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:r=[],n=!(a=!0),s=void 0,e.prev=6,o=(0,h["default"])(t);case 8:if(a=(u=o.next()).done){e.next=40;break}if(c=u.value,i=(0,l["default"])({},c),"data.form.toAddress"!=c.path){e.next=20;break}return e.t0=l["default"],e.t1=i,e.next=16,p.checkAddressee(c.value);case 16:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=36;break;case 20:if("data.form.ccAddress"!=c.path){e.next=29;break}return e.t3=l["default"],e.t4=i,e.next=25,p.checkCopyTo(c.value);case 25:e.t5=e.sent,(0,e.t3)(e.t4,e.t5),e.next=36;break;case 29:if("data.form.subject"!=c.path){e.next=36;break}return e.t6=l["default"],e.t7=i,e.next=34,p.checkSubjectd(c.value);case 34:e.t8=e.sent,(0,e.t6)(e.t7,e.t8);case 36:r.push(i);case 37:a=!0,e.next=8;break;case 40:e.next=46;break;case 42:e.prev=42,e.t9=e["catch"](6),n=!0,s=e.t9;case 46:e.prev=46,e.prev=47,!a&&o["return"]&&o["return"]();case 49:if(e.prev=49,!n){e.next=52;break}throw s;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return d={},f=!0,r.forEach(function(e){d[e.path]=e.value,d[e.errorPath]=e.message,e.message&&(f=!1)}),p.metaAction.sfs(d),e.abrupt("return",f);case 58:case"end":return e.stop()}},e,p,[[6,42,46,54],[47,,49,53]])})),function(e){return t.apply(this,arguments)}),this.checkAddressee=(a=(0,u["default"])(m["default"].mark(function e(t){var r;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,t?/^((([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6}\;))*(([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})))$/.test(t)||(r="请输入正确格式的邮箱"):r="请录入邮箱",e.abrupt("return",{errorPath:"data.other.error.addressee",message:r});case 3:case"end":return e.stop()}},e,p)})),function(e){return a.apply(this,arguments)}),this.checkCopyTo=(n=(0,u["default"])(m["default"].mark(function e(t){var r,a;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,a=/^((([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6}\;))*(([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})))$/,t?a.test(t)||(r="请输入正确格式的邮箱"):r="",e.abrupt("return",{errorPath:"data.other.error.copyTo",message:r});case 3:case"end":return e.stop()}},e,p)})),function(e){return n.apply(this,arguments)}),this.checkSubjectd=(s=(0,u["default"])(m["default"].mark(function e(t){var r;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,t||(r="请输入主题"),e.abrupt("return",{errorPath:"data.other.error.subject",message:r});case 3:case"end":return e.stop()}},e,p)})),function(e){return s.apply(this,arguments)}),this.sendMail=(o=(0,u["default"])(m["default"].mark(function e(t){return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.webapi.mail.mailShare(p.component.props.mailShareUrl,t);case 2:e.sent&&p.metaAction.toast("success","邮件分享成功");case 4:case"end":return e.stop()}},e,p)})),function(e){return o.apply(this,arguments)}),this.onOk=(0,u["default"])(m["default"].mark(function e(){var t;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.metaAction.gf("data.form").toJS(),e.next=3,p.check([{path:"data.form.toAddress",value:t.toAddress},{path:"data.form.ccAddress",value:t.ccAddress},{path:"data.form.subject",value:t.subject},{path:"data.form.textBody",value:t.textBody}]);case 3:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return delete t.file,t.period=t.search.newParams,delete(t=(0,l["default"])(t,t.search)).periodName,delete t.search,delete t.fileHref,delete t.newParams,p.sendMail(t),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,p)}))},a);e.exports=t["default"]},565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(0)),n=i(r(7));t["default"]=function(e){var t=new o.reducer(e),r=new d((0,a["default"])({},e,{metaReducer:t}));return(0,a["default"])({},t,r)};var s=r(13),o=r(34),u=i(r(161)),c=r(216);function i(e){return e&&e.__esModule?e:{"default":e}}var d=function e(t){var a=this;(0,n["default"])(this,e),this.init=function(e,t){var r=(0,c.getInitState)();return a.metaReducer.init(e,r)},this.load=function(e,t,r){return e=a.metaReducer.sf(e,"data.form.url",(0,s.fromJS)(t.url)),e=a.metaReducer.sf(e,"data.form.urlName",(0,s.fromJS)(r)),e=a.metaReducer.sf(e,"data.form.periodName",(0,s.fromJS)(t.period)),e=a.metaReducer.sf(e,"data.form.fileHref",location.origin+"/share-oss"+t.url),e=a.metaReducer.sf(e,"data.form.search",(0,s.fromJS)(t.params))},this.metaReducer=t.metaReducer,this.config=u["default"].current};e.exports=t["default"]}});